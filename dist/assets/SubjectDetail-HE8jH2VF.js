import{c as f,k as ee,i as te,u as se,h as ae,r as n,j as e,m as o,B as E,A as w,E as z,z as c}from"./index-C1aQpu_j.js";import{C as re}from"./calendar-Cz86ERDl.js";import{C as le}from"./check-CL6RjaTp.js";import{X as B}from"./x-BQwl8pYP.js";import{P as O}from"./plus-Dzq5aapq.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=f("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=f("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=f("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=f("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=f("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function fe(){const{id:l}=ee(),R=te(),{themeConfig:s}=se(),{subjects:q,addTopic:H,deleteTopic:V,toggleTopic:I,addResource:S,deleteResource:K}=ae(),i=q.find(t=>t.id===l),[Z,y]=n.useState(!1),[_,u]=n.useState(!1),[N,T]=n.useState(""),[m,b]=n.useState(""),[p,v]=n.useState(""),[h,$]=n.useState("link"),[x,U]=n.useState(null),[xe,d]=n.useState(!1),k=n.useRef([]);if(!i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Subject not found"}),e.jsx("button",{onClick:()=>R("/subjects"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold",children:"Back to Subjects"})]})});n.useEffect(()=>()=>{k.current.forEach(t=>URL.revokeObjectURL(t)),k.current=[]},[]);const A=()=>{N.trim()&&l&&(H(l,{name:N.trim(),completed:!1}),T(""),y(!1))},W=t=>{var r;const a=(r=t.target.files)==null?void 0:r[0];a&&(U(a),b(a.name))},L=async()=>{if(l){d(!0);try{if(h==="file"&&x){if(x.size>5242880){c.error("File size must be less than 5MB. Please choose a smaller file."),d(!1);return}const a=new FileReader;a.onload=()=>{try{const r=a.result;S(l,{title:m.trim()||x.name,url:"",type:"file",fileName:x.name,fileData:r}),c.success("File added successfully!"),b(""),v(""),U(null),$("link"),u(!1),d(!1)}catch{c.error("Failed to save file. Storage limit may be exceeded."),d(!1)}},a.onerror=()=>{c.error("Failed to read file"),d(!1)},a.readAsDataURL(x)}else h==="file"&&!x?(c.error("Please select a file to upload"),d(!1)):m.trim()&&p.trim()?(S(l,{title:m.trim(),url:p.trim(),type:h}),c.success(`${h.charAt(0).toUpperCase()+h.slice(1)} added successfully!`),b(""),v(""),$("link"),u(!1),d(!1)):(!m.trim()&&!p.trim()?c.error("Please fill in both the title and URL fields"):m.trim()?p.trim()||c.error("Please enter a URL"):c.error("Please enter a resource title"),d(!1))}catch{c.error("Failed to add resource"),d(!1)}}},X=t=>{switch(t){case"video":return e.jsx(de,{className:"w-5 h-5"});case"file":return e.jsx(ne,{className:"w-5 h-5"});default:return e.jsx(ce,{className:"w-5 h-5"})}},G=t=>{if(!t)return!1;const a=t.toLowerCase().split(".").pop();return["pdf","jpg","jpeg","png","gif","bmp","webp","svg","txt","md","json","xml","csv","mp4","webm","ogg","mp3","wav"].includes(a||"")},F=t=>{try{if(!t||typeof t!="string")return"";if(!t.startsWith("data:"))return t;const a=t.split(",");if(a.length!==2)return t;const r=a[1],P=a[0].match(/data:([^;]+)/);if(!P)return t;const J=P[1],C=atob(r),M=new Array(C.length);for(let j=0;j<C.length;j++)M[j]=C.charCodeAt(j);const Q=new Uint8Array(M),Y=new Blob([Q],{type:J}),D=URL.createObjectURL(Y);return k.current.push(D),D}catch{return t}};return e.jsxs("div",{className:`min-h-screen ${s.background} space-y-6 pb-20`,children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"px-4",children:[e.jsxs("button",{onClick:()=>R("/subjects"),className:`flex items-center gap-2 ${s.textSecondary} hover:${s.text} transition-colors mb-4`,children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Subjects"})]}),e.jsx("div",{className:`bg-gradient-to-r ${i.color} rounded-2xl p-1 shadow-lg`,children:e.jsx("div",{className:`${s.card} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`bg-gradient-to-r ${i.color} p-4 rounded-xl`,children:e.jsx(E,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s.text}`,children:i.name}),e.jsx("p",{className:`${s.textSecondary} text-sm mt-1`,children:"Subject Details & Resources"})]})]})})})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"px-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`${s.card} rounded-xl p-4 text-center border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} `,children:[e.jsx(re,{className:`w-6 h-6 mx-auto mb-2 ${s.textSecondary} `}),e.jsx("p",{className:`text-2xl font-bold ${s.text} `,children:i.topics.length}),e.jsx("p",{className:`text-xs ${s.textSecondary} `,children:"Topics"})]}),e.jsxs("div",{className:`${s.card} rounded-xl p-4 text-center border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} `,children:[e.jsx(E,{className:`w-6 h-6 mx-auto mb-2 ${s.textSecondary} `}),e.jsx("p",{className:`text-2xl font-bold ${s.text} `,children:i.resources.length}),e.jsx("p",{className:`text-xs ${s.textSecondary} `,children:"Resources"})]})]}),e.jsxs("div",{className:"px-4 space-y-4",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx("h2",{className:`text-xl font-bold ${s.text} mb-3`,children:"Topics"}),i.topics.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:e.jsx(w,{children:i.topics.map((t,a)=>e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:a*.05},className:`${s.card} rounded-xl p-4 border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>l&&I(l,t.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t.completed?"bg-green-500 border-green-500":`border-gray-400 ${s.card}`} `,children:t.completed&&e.jsx(le,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:`${t.completed?"line-through "+s.textSecondary:s.text} `,children:t.name})]}),e.jsx("button",{onClick:()=>l&&V(l,t.id),className:"text-red-500 hover:text-red-600",children:e.jsx(B,{className:"w-4 h-4"})})]},t.id))})}),e.jsx(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>y(!0),className:`w-full rounded-2xl p-6 border-2 border-dashed ${s.text==="text-white"?"border-gray-600":"border-gray-300"} hover: border-blue - 400 transition-all`,children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(O,{className:`w-6 h-6 ${s.textSecondary} `}),e.jsx("span",{className:`font-semibold ${s.text} `,children:"Add Topic"})]})})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("h2",{className:`text-xl font-bold ${s.text} mb-3`,children:"Resources"}),i.resources.length>0&&e.jsx("div",{className:"space-y-3 mb-3",children:e.jsx(w,{children:i.resources.map((t,a)=>e.jsx(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:a*.05},className:`${s.card} rounded-xl p-4 border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} `,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`${s.textSecondary} mt-1`,children:X(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-bold ${s.text} mb-1`,children:t.title}),t.type==="file"&&t.fileData?e.jsxs("div",{className:"flex gap-2 mt-2",children:[G(t.fileName||t.title)&&e.jsxs("button",{onClick:()=>{const r=F(t.fileData);window.open(r,"_blank"),setTimeout(()=>URL.revokeObjectURL(r),100)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500 hover:bg-green-600 text-white text-sm font-semibold transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Open"]}),e.jsxs("button",{onClick:()=>{const r=F(t.fileData),g=document.createElement("a");g.href=r,g.download=t.fileName||t.title,g.click(),setTimeout(()=>URL.revokeObjectURL(r),100)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),"Download"]})]}):e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>{window.open(t.url,"_blank")},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500 hover:bg-green-600 text-white text-sm font-semibold transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Open"]}),e.jsx("span",{className:`text-xs ${s.textSecondary} self-center truncate max-w - [200px]`,children:t.url})]})]})]}),e.jsx("button",{onClick:()=>l&&K(l,t.id),className:"text-red-500 hover:text-red-600 ml-2",children:e.jsx(B,{className:"w-4 h-4"})})]})},t.id))})}),e.jsx(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!0),className:`w-full rounded-2xl p-6 border-2 border-dashed ${s.text==="text-white"?"border-gray-600":"border-gray-300"} hover: border-blue - 400 transition-all`,children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(O,{className:`w-6 h-6 ${s.textSecondary} `}),e.jsx("span",{className:`font-semibold ${s.text} `,children:"Add Resource"})]})})]})]}),e.jsx(w,{children:Z&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>y(!1),children:e.jsxs(o.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:`${s.card} rounded-2xl p-6 max-w-sm w-full shadow-2xl border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} `,children:[e.jsx("h2",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Add Topic"}),e.jsx("input",{type:"text",value:N,onChange:t=>T(t.target.value),onKeyPress:t=>t.key==="Enter"&&A(),placeholder:"Topic name",className:`w-full px-4 py-3 rounded-xl border-2 ${s.background} ${s.text} ${s.text==="text-white"?"border-gray-600":"border-gray-300"} focus: border-blue - 500 focus: outline-none transition-colors mb-4`,autoFocus:!0}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:`flex-1 px-4 py-3 rounded-xl font-semibold ${s.background} ${s.text} border-2 ${s.text==="text-white"?"border-gray-600":"border-gray-300"} hover: bg-gray - 100 dark: hover: bg-gray - 700 transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:A,className:"flex-1 px-4 py-3 rounded-xl font-semibold bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl transition-all",children:"Add Topic"})]})]})})}),e.jsx(w,{children:_&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>u(!1),children:e.jsxs(o.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:`${s.card} rounded-2xl p-6 max-w-sm w-full shadow-2xl border ${s.text==="text-white"?"border-gray-700":"border-gray-200"} `,children:[e.jsx("h2",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Add Resource"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-semibold ${s.text} mb-2`,children:"Type"}),e.jsx("div",{className:"flex gap-2",children:["link","video","file"].map(t=>e.jsx("button",{onClick:()=>$(t),className:`flex-1 px-4 py-2 rounded-xl font-semibold transition-all ${h===t?"bg-gradient-to-r from-blue-500 to-purple-600 text-white":`${s.background} ${s.text} border-2 ${s.text==="text-white"?"border-gray-600":"border-gray-300"}`} `,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),h==="file"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:m,onChange:t=>b(t.target.value),placeholder:"Resource title (optional)",className:`w-full px-4 py-3 rounded-xl border-2 ${s.background} ${s.text} ${s.text==="text-white"?"border-gray-600":"border-gray-300"} focus: border-blue - 500 focus: outline-none transition-colors mb-3`}),e.jsxs("div",{className:`w-full px-4 py-3 rounded-xl border-2 border-dashed ${s.text==="text-white"?"border-gray-600":"border-gray-300"} hover: border-blue - 400 transition-all mb-3`,children:[e.jsx("input",{type:"file",onChange:W,className:"w-full",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:`cursor-pointer ${s.text} `,children:x?`Selected: ${x.name} `:"Choose a file"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:m,onChange:t=>b(t.target.value),placeholder:"Resource title",className:`w-full px-4 py-3 rounded-xl border-2 ${s.background} ${s.text} ${s.text==="text-white"?"border-gray-600":"border-gray-300"} focus: border-blue - 500 focus: outline-none transition-colors mb-3`,autoFocus:!0}),e.jsx("input",{type:"text",value:p,onChange:t=>v(t.target.value),onKeyPress:t=>t.key==="Enter"&&L(),placeholder:"URL (e.g., https://example.com)",className:`w-full px-4 py-3 rounded-xl border-2 ${s.background} ${s.text} ${s.text==="text-white"?"border-gray-600":"border-gray-300"} focus: border-blue - 500 focus: outline-none transition-colors mb-3`})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:`flex-1 px-4 py-3 rounded-xl font-semibold ${s.background} ${s.text} border-2 ${s.text==="text-white"?"border-gray-600":"border-gray-300"} hover: bg-gray - 100 dark: hover: bg-gray - 700 transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 rounded-xl font-semibold bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl transition-all",children:"Add Resource"})]})]})})})]})}export{fe as SubjectDetail};
