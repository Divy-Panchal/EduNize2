import{c as D,u as U,d as Z,b as ee,r as f,j as e,m as l,B as te}from"./index-C1aQpu_j.js";import{t as $,c as v,n as T,s as _,a as ae,f as j,A as se}from"./AddTaskModal-Bek901uV.js";import{P as re}from"./plus-Dzq5aapq.js";import{C as de}from"./calendar-Cz86ERDl.js";import{X as W}from"./x-BQwl8pYP.js";import"./upload-BqjHctzp.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=D("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=D("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=D("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);function R(r,t,s){const d=$(r,s==null?void 0:s.in);return isNaN(t)?v(r,NaN):(t&&d.setDate(d.getDate()+t),d)}function P(r,t,s){const d=$(r,s==null?void 0:s.in);if(isNaN(t))return v(r,NaN);if(!t)return d;const i=d.getDate(),c=v(r,d.getTime());c.setMonth(d.getMonth()+t+1,0);const m=c.getDate();return i>=m?c:(d.setFullYear(c.getFullYear(),c.getMonth(),i),d)}function V(r,t,s){return R(r,t*7,s)}function ne(r){return v(r,Date.now())}function B(r,t,s){const[d,i]=T(s==null?void 0:s.in,r,t);return+_(d)==+_(i)}function ie(r,t){const s=$(r,t==null?void 0:t.in),d=s.getMonth();return s.setFullYear(s.getFullYear(),d+1,0),s.setHours(23,59,59,999),s}function oe(r,t){const[s,d]=T(r,t.start,t.end);return{start:s,end:d}}function ce(r,t){const{start:s,end:d}=oe(t==null?void 0:t.in,r);let i=+s>+d;const c=i?+s:+d,m=i?d:s;m.setHours(0,0,0,0);let N=1;const h=[];for(;+m<=c;)h.push(v(s,m)),m.setDate(m.getDate()+N),m.setHours(0,0,0,0);return i?h.reverse():h}function me(r,t){const s=$(r,t==null?void 0:t.in);return s.setDate(1),s.setHours(0,0,0,0),s}function xe(r,t,s){const[d,i]=T(s==null?void 0:s.in,r,t);return d.getFullYear()===i.getFullYear()&&d.getMonth()===i.getMonth()}function z(r,t){return B(v(r,r),ne(r))}function ue(r,t,s){return P(r,-1,s)}function he(r,t,s){return V(r,-1,s)}function ve(){const{theme:r,themeConfig:t}=U(),{classes:s,addClass:d,deleteClass:i}=Z(),{tasks:c,addTask:m}=ee(),[N,h]=f.useState(new Date),[g,H]=f.useState(new Date),[y,A]=f.useState("week"),[I,w]=f.useState(!1),[q,O]=f.useState(!1),[o,b]=f.useState({subject:"",type:"",day:0,time:"09:00",duration:1,color:"bg-blue-500"}),F=ae(N,{weekStartsOn:1}),C=Array.from({length:7},(a,n)=>R(F,n)),E=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],G=(a,n)=>s.find(x=>x.day===a&&x.time===n),X=a=>{a.preventDefault(),!(!o.subject||!o.type)&&(d(o),b({subject:"",type:"",day:0,time:"09:00",duration:1,color:"bg-blue-500"}),w(!1))},J=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-teal-500"];return e.jsxs("div",{className:"space-y-6 pb-20 md:pb-32",children:[e.jsxs(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${t.text}`,children:"Timetable"}),e.jsx("p",{className:t.textSecondary,children:"Your weekly class schedule"})]}),e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{console.log("Button clicked! View mode:",y),y==="month"?(console.log("Opening Add Task modal"),O(!0)):(console.log("Opening Add Class modal"),w(!0))},className:`${t.primary} ${t.primaryHover} text-white px-4 md:px-6 py-2 md:py-3 rounded-lg font-medium flex items-center gap-2 shadow-lg text-sm md:text-base`,children:[e.jsx(re,{className:"w-5 h-5"}),y==="month"?"Add Task":"Add Class"]})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${t.card} p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(he(N)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Y,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsxs("h2",{className:`text-sm md:text-lg font-semibold ${t.text}`,children:["Week of ",j(F,"MMM dd, yyyy")]}),e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(V(N,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(L,{className:`w-5 h-5 ${t.textSecondary}`})})]})}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"flex justify-center gap-2",children:[e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>A("week"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${y==="week"?`${t.primary} text-white`:`${t.card} ${t.text} border dark:border-gray-600`}`,children:[e.jsx(le,{className:"w-4 h-4"}),"Week View"]}),e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>A("month"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${y==="month"?`${t.primary} text-white`:`${t.card} ${t.text} border dark:border-gray-600`}`,children:[e.jsx(de,{className:"w-4 h-4"}),"Calendar View"]})]}),y==="month"?e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${t.card} p-4 rounded-xl shadow-sm border dark:border-gray-700`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>H(ue(g)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Y,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("h2",{className:`text-lg font-semibold ${t.text}`,children:j(g,"MMMM yyyy")}),e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>H(P(g,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(L,{className:`w-5 h-5 ${t.textSecondary}`})})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${t.card} p-4 rounded-xl shadow-sm border dark:border-gray-700`,children:e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(a=>e.jsx("div",{className:`text-center font-semibold ${t.textSecondary} text-sm p-2`,children:a},a)),(()=>{const a=me(g),n=ie(g),x=ce({start:a,end:n}),M=(a.getDay()+6)%7;return[...Array(M).fill(null),...x].map((u,K)=>{if(!u)return e.jsx("div",{className:"p-2"},`empty-${K}`);const S=c.filter(k=>k.dueDate&&B(new Date(k.dueDate),u));return e.jsxs(l.div,{whileHover:{scale:1.05},className:`p-2 min-h-[80px] rounded-lg border-2 ${z(u)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":xe(u,g)?`${t.background} border-gray-200 dark:border-gray-600`:"bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 opacity-50"}`,children:[e.jsx("div",{className:`text-sm font-medium ${z(u)?"text-blue-600 dark:text-blue-400":t.text}`,children:j(u,"d")}),e.jsxs("div",{className:"mt-1 space-y-1",children:[S.slice(0,2).map((k,Q)=>e.jsx("div",{className:"text-xs px-1 py-0.5 rounded bg-blue-500 text-white truncate",title:k.title,children:k.title},Q)),S.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",S.length-2," more"]})]})]},u.toISOString())})})()]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:`${t.card} p-4 md:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(te,{className:`w-5 h-5 ${t.primary.replace("bg-","text-")}`}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${t.text}`,children:"Today's Classes"})]}),e.jsx("div",{className:"space-y-3",children:s.slice(0,3).map((a,n)=>e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:n*.1},className:`flex items-center gap-3 md:gap-4 p-3 rounded-lg ${t.background} relative`,children:[e.jsx("div",{className:`w-3 h-3 ${a.color} rounded-full`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${t.text} text-sm md:text-base`,children:a.subject}),e.jsx("p",{className:`text-xs md:text-sm ${t.textSecondary}`,children:a.type})]}),e.jsx("span",{className:`text-xs md:text-sm font-medium ${t.textSecondary}`,children:a.time}),e.jsx("button",{onClick:x=>{x.stopPropagation(),console.log("Remove button clicked!"),console.log("Class item:",a),console.log("Class ID:",a.id),console.log("All classes:",s),a.id?(console.log("Calling deleteClass with ID:",a.id),i(a.id)):console.error("No ID found for class:",a)},className:"relative z-10 p-1.5 bg-red-500 hover:bg-red-600 rounded-full transition-colors duration-200 flex-shrink-0",children:e.jsx(W,{className:"w-3 h-3 text-white"})})]},n))})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`${t.card} p-2 md:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-auto`,children:e.jsxs("div",{className:"min-w-full pb-4",children:[e.jsxs("div",{className:`grid grid-cols-8 gap-1 md:gap-2 mb-4 sticky top-0 ${t.card} z-10`,children:[e.jsx("div",{className:`p-1 md:p-3 text-center font-medium ${t.textSecondary} text-xs md:text-sm`,children:"Time"}),C.map((a,n)=>e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},className:"p-1 md:p-3 text-center",children:[e.jsx("div",{className:`font-medium ${t.text} text-xs md:text-sm`,children:j(a,"EEE")}),e.jsx("div",{className:`text-xs md:text-sm ${t.textSecondary}`,children:j(a,"MMM dd")})]},a.toISOString()))]}),e.jsx("div",{className:"space-y-2 md:space-y-2",children:E.map((a,n)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:n*.05},className:"grid grid-cols-8 gap-1 md:gap-2",children:[e.jsx("div",{className:`p-2 md:p-3 text-xs md:text-sm font-medium ${t.textSecondary} text-center flex items-center justify-center ${t.card} rounded-lg border border-gray-200 dark:border-gray-700`,children:a}),C.map((x,M)=>{const p=G(M,a);return e.jsx(l.div,{whileHover:{scale:1.02},className:`p-2 md:p-3 min-h-[50px] md:min-h-[70px] border-2 rounded-lg flex items-center justify-center ${p?`${p.color} text-white shadow-md border-transparent`:`${t.card} hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-200 dark:border-gray-600`} transition-all duration-200 cursor-pointer`,children:p&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-xs md:text-sm",children:p.subject}),e.jsx("div",{className:"text-xs opacity-90 hidden md:block",children:p.type})]})},`${x.toISOString()}-${a}`)})]},a))})]})}),I&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",onClick:()=>w(!1),children:e.jsxs(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:`${t.card} p-4 md:p-6 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto`,onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl font-semibold ${t.text}`,children:"Add New Class"}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(W,{className:`w-5 h-5 ${t.textSecondary}`})})]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-2`,children:"Subject *"}),e.jsx("input",{type:"text",value:o.subject,onChange:a=>b({...o,subject:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base ${t.background} ${t.text} dark:border-gray-600`,placeholder:"e.g., Mathematics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-2`,children:"Type *"}),e.jsx("input",{type:"text",value:o.type,onChange:a=>b({...o,type:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base ${t.background} ${t.text} dark:border-gray-600`,placeholder:"e.g., Lecture, Lab, Tutorial"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-2`,children:"Day"}),e.jsx("select",{value:o.day,onChange:a=>b({...o,day:parseInt(a.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base ${t.background} ${t.text} dark:border-gray-600`,children:C.map((a,n)=>e.jsx("option",{value:n,className:"text-gray-900 bg-white",children:j(a,"EEEE")},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-2`,children:"Time"}),e.jsx("select",{value:o.time,onChange:a=>b({...o,time:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base ${t.background} ${t.text} dark:border-gray-600`,children:E.map(a=>e.jsx("option",{value:a,className:"text-gray-900 bg-white",children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-2`,children:"Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:J.map(a=>e.jsx("button",{type:"button",onClick:()=>b({...o,color:a}),className:`w-8 h-8 ${a} rounded-lg border-2 ${o.color===a?"border-gray-800 dark:border-gray-200":"border-gray-200 dark:border-gray-600"} transition-all duration-200`},a))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:`flex-1 ${t.primary} ${t.primaryHover} text-white py-2 md:py-3 rounded-lg font-medium transition-colors duration-200 text-sm md:text-base`,children:"Add Class"}),e.jsx(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>w(!1),className:`${t.card} px-4 md:px-6 py-2 md:py-3 border dark:border-gray-600 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-sm md:text-base`,children:"Cancel"})]})]})]})})]}),e.jsx(se,{isOpen:q,onClose:()=>O(!1)})]})}export{ve as Timetable};
